<div class='form'>
  <h2><%= t('.your_profile') %></h2>

  <%= form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => { :method => :put }) do |f| %>
    <%= errors_for resource %>

    <div class='form_row'>
      <%= f.label :email %>
      <%= f.text_field :email, :class => 'text' %>
    </div>

    <div class='form_row'>
      <%= f.label :password %><i>(<%= t('.leave_blank') %>)</i></em>
      <%= f.password_field :password, :class => 'text' %>
    </div>

    <div class='form_row'>
      <%= f.label :password_confirmation %>
      <%= f.password_field :password_confirmation, :class => 'text' %>
    </div>

    <div class="form_row">
      <%= image_tag resource.gravatar_url %>
      <%= t(:change_picture) %> <%= link_to 'Gravatar', 'http://www.gravatar.com', :target => '_blank' %>
    </div>

    <div class='form_row_submit'>
      <%= f.submit :class => 'button' %>
    </div>
  <% end %>

  <h2><%= t('.authentications') %></h2>

  <% if current_user.authentications.empty? -%>
    <a href="/auth/facebook" class="auth_provider"><%= image_tag "facebook-connect-button.png", :alt => "Facebook" %></a>
  <% end -%>

  <% current_user.authentications.each do |authentication| -%>
    <tr>
      <td><%= authentication.provider %></td>
      <td><%= link_to t('delete'), authentication, :confirm => t('delete_msg', :name => authentication.provider.capitalize), :method => :delete %></td>
    </tr>
  <% end -%>

  <h2><%= t('.cancel_account') %></h2>

  <div class='form_row'>
    <%= t('.unhappy') %> <%= link_to t('.delete_account'), registration_path(resource_name), :confirm => t('delete_msg', :name => current_user.email), :method => :delete %>.
  </div>
</div>

